<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>WIND CLIENT | Cloud</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { background: #030306; color: white; font-family: 'Montserrat', sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .card { background: #090812; padding: 40px; border-radius: 30px; border: 2px solid #c084fc; text-align: center; width: 400px; box-shadow: 0 0 30px rgba(192, 132, 252, 0.2); }
        h1 { font-family: 'Orbitron', sans-serif; color: #c084fc; font-size: 24px; margin-bottom: 20px; }
        
        .tabs { display: flex; gap: 10px; margin-bottom: 20px; }
        .tab-btn { flex: 1; padding: 10px; background: #0d0d1a; border: 1px solid #2e2a5e; color: white; cursor: pointer; border-radius: 10px; transition: 0.3s; }
        .tab-btn.active { background: #c084fc; color: black; font-weight: bold; }

        input { width: 100%; padding: 12px; margin: 8px 0; background: #0d0d1a; border: 1px solid #2e2a5e; border-radius: 10px; color: white; box-sizing: border-box; outline: none; }
        button.action-btn { width: 100%; padding: 15px; margin-top: 15px; background: #c084fc; border: none; border-radius: 12px; color: black; font-weight: bold; cursor: pointer; transition: 0.3s; }
        button.action-btn:hover { background: #FFFFFF; transform: scale(1.02); }

        .hidden { display: none; }
        .user-info { background: #16162e; padding: 15px; border-radius: 15px; margin-bottom: 20px; border-left: 4px solid #c084fc; text-align: left; }
        .status-msg { font-size: 13px; margin-top: 10px; color: #ef4444; min-height: 20px; }
        .btn-dl { background: #4ade80 !important; }
    </style>
</head>
<body>

<div id="authContainer" class="card">
    <h1 id="mainTitle">WIND CLOUD</h1>
    
    <div id="tabBar" class="tabs">
        <button id="loginTab" class="tab-btn active" onclick="switchMode('login')">–í–•–û–î</button>
        <button id="regTab" class="tab-btn" onclick="switchMode('reg')">–†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø</button>
    </div>

    <input type="text" id="userField" placeholder="–ù–∏–∫–Ω–µ–π–º">
    <input type="password" id="passField" placeholder="–ü–∞—Ä–æ–ª—å">
    
    <button id="submitBtn" class="action-btn" onclick="processAuth()">–í–û–ô–¢–ò</button>
    <div id="statusMsg" class="status-msg"></div>
</div>

<div id="dashboard" class="card hidden">
    <h1>WIND DASHBOARD</h1>
    <div class="user-info">
        <div id="resUser" style="font-weight: bold; font-size: 18px; color: white;">USER: -</div>
        <div id="resUUID" style="color: #c084fc;">UUID: #0</div>
    </div>
    
    <button class="action-btn btn-dl" onclick="window.location.href='–¢–í–û–Ø_–°–°–´–õ–ö–ê_–ù–ê_–õ–ê–£–ù–ß–ï–†'">
        üì• –°–ö–ê–ß–ê–¢–¨ –õ–ê–£–ù–ß–ï–†
    </button>
    
    <button class="action-btn" style="background: #fbbf24;" onclick="window.open('https://t.me/TetrisWindClientbot')">
        ‚≠ê –ö–£–ü–ò–¢–¨ VIP
    </button>
    
    <button class="action-btn" style="background: #333; color: white; margin-top: 10px;" onclick="location.reload()">–í–´–ô–¢–ò</button>
</div>

<script>
    const firebaseConfig = {
        apiKey: "AIzaSyDy4mU5xpso1OtTA86rbABnwXU6xH_Y5Jk",
        databaseURL: "https://windclient111-default-rtdb.firebaseio.com",
        projectId: "windclient111",
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    let currentMode = 'login';

    function switchMode(mode) {
        currentMode = mode;
        document.getElementById('loginTab').classList.toggle('active', mode === 'login');
        document.getElementById('regTab').classList.toggle('active', mode === 'reg');
        document.getElementById('submitBtn').innerText = mode === 'login' ? '–í–û–ô–¢–ò' : '–°–û–ó–î–ê–¢–¨ –ê–ö–ö–ê–£–ù–¢';
        document.getElementById('statusMsg').innerText = '';
    }

    async function processAuth() {
        const user = document.getElementById('userField').value.trim();
        const pass = document.getElementById('passField').value.trim();
        const status = document.getElementById('statusMsg');

        if (!user || !pass) { status.innerText = "‚ùå –ó–∞–ø–æ–ª–Ω–∏ –ø–æ–ª—è!"; return; }

        status.innerText = "‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞...";
        status.style.color = "#c084fc";

        try {
            const userRef = db.ref('users/' + user);
            const snapshot = await userRef.once('value');

            if (currentMode === 'reg') {
                // –õ–û–ì–ò–ö–ê –†–ï–ì–ò–°–¢–†–ê–¶–ò–ò
                if (snapshot.exists()) {
                    status.innerText = "‚ùå –ù–∏–∫ —É–∂–µ –∑–∞–Ω—è—Ç!";
                } else {
                    const countSnap = await db.ref('users_count').once('value');
                    let newUUID = (countSnap.val() || 0) + 1;
                    await userRef.set({ password: pass, uuid: newUUID });
                    await db.ref('users_count').set(newUUID);
                    showDash(user, newUUID);
                }
            } else {
                // –õ–û–ì–ò–ö–ê –í–•–û–î–ê
                if (snapshot.exists() && snapshot.val().password === pass) {
                    showDash(user, snapshot.val().uuid);
                } else {
                    status.innerText = "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –Ω–∏–∫ –∏–ª–∏ –ø–∞—Ä–æ–ª—å!";
                    status.style.color = "#ef4444";
                }
            }
        } catch (e) {
            status.innerText = "‚ùå –û—à–∏–±–∫–∞ –±–∞–∑—ã!";
        }
    }

    function showDash(user, uuid) {
        document.getElementById('authContainer').classList.add('hidden');
        document.getElementById('dashboard').classList.remove('hidden');
        document.getElementById('resUser').innerText = "USER: " + user.toUpperCase();
        document.getElementById('resUUID').innerText = "UUID: #" + uuid;
    }
</script>
</body>
</html>
